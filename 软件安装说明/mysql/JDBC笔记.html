<!doctype html>
<html>
<head>
    <meta charset='UTF-8'>
    <meta name='viewport' content='width=device-width initial-scale=1'>
    <title>JDBC笔记</title>
    <link href='https://fonts.loli.net/css?family=PT+Serif:400,400italic,700,700italic&subset=latin,cyrillic-ext,cyrillic,latin-ext'
          rel='stylesheet' type='text/css'/>
    <style type='text/css'>html {
        overflow-x: initial !important;
    }

    :root {
        --bg-color: #ffffff;
        --text-color: #333333;
        --select-text-bg-color: #B5D6FC;
        --select-text-font-color: auto;
        --monospace: "Lucida Console", Consolas, "Courier", monospace;
    }

    html {
        font-size: 14px;
        background-color: var(--bg-color);
        color: var(--text-color);
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        -webkit-font-smoothing: antialiased;
    }

    body {
        margin: 0px;
        padding: 0px;
        height: auto;
        bottom: 0px;
        top: 0px;
        left: 0px;
        right: 0px;
        font-size: 1rem;
        line-height: 1.42857;
        overflow-x: hidden;
        background: inherit;
    }

    iframe {
        margin: auto;
    }

    a.url {
        word-break: break-all;
    }

    a:active, a:hover {
        outline: 0px;
    }

    .in-text-selection, ::selection {
        text-shadow: none;
        background: var(--select-text-bg-color);
        color: var(--select-text-font-color);
    }

    #write {
        margin: 0px auto;
        height: auto;
        width: inherit;
        word-break: normal;
        word-wrap: break-word;
        position: relative;
        white-space: normal;
        overflow-x: visible;
        padding-top: 40px;
    }

    #write.first-line-indent p {
        text-indent: 2em;
    }

    #write.first-line-indent li p, #write.first-line-indent p * {
        text-indent: 0px;
    }

    #write.first-line-indent li {
        margin-left: 2em;
    }

    .for-image #write {
        padding-left: 8px;
        padding-right: 8px;
    }

    body.typora-export {
        padding-left: 30px;
        padding-right: 30px;
    }

    .typora-export .footnote-line, .typora-export li, .typora-export p {
        white-space: pre-wrap;
    }

    @media screen and (max-width: 500px) {
        body.typora-export {
            padding-left: 0px;
            padding-right: 0px;
        }

        #write {
            padding-left: 20px;
            padding-right: 20px;
        }

        .CodeMirror-sizer {
            margin-left: 0px !important;
        }

        .CodeMirror-gutters {
            display: none !important;
        }
    }

    #write li > figure:first-child {
        margin-top: -20px;
    }

    #write ol, #write ul {
        position: relative;
    }

    img {
        max-width: 100%;
        vertical-align: middle;
    }

    button, input, select, textarea {
        color: inherit;
        font-style: inherit;
        font-variant: inherit;
        font-weight: inherit;
        font-stretch: inherit;
        font-size: inherit;
        line-height: inherit;
        font-family: inherit;
    }

    input[type="checkbox"], input[type="radio"] {
        line-height: normal;
        padding: 0px;
    }

    *, ::after, ::before {
        box-sizing: border-box;
    }

    #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre {
        width: inherit;
    }

    #write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p {
        position: relative;
    }

    h1, h2, h3, h4, h5, h6 {
        break-after: avoid-page;
        break-inside: avoid;
        orphans: 2;
    }

    p {
        orphans: 4;
    }

    h1 {
        font-size: 2rem;
    }

    h2 {
        font-size: 1.8rem;
    }

    h3 {
        font-size: 1.6rem;
    }

    h4 {
        font-size: 1.4rem;
    }

    h5 {
        font-size: 1.2rem;
    }

    h6 {
        font-size: 1rem;
    }

    .md-math-block, .md-rawblock, h1, h2, h3, h4, h5, h6, p {
        margin-top: 1rem;
        margin-bottom: 1rem;
    }

    .hidden {
        display: none;
    }

    .md-blockmeta {
        color: rgb(204, 204, 204);
        font-weight: 700;
        font-style: italic;
    }

    a {
        cursor: pointer;
    }

    sup.md-footnote {
        padding: 2px 4px;
        background-color: rgba(238, 238, 238, 0.7);
        color: rgb(85, 85, 85);
        border-radius: 4px;
        cursor: pointer;
    }

    sup.md-footnote a, sup.md-footnote a:hover {
        color: inherit;
        text-transform: inherit;
        text-decoration: inherit;
    }

    #write input[type="checkbox"] {
        cursor: pointer;
        width: inherit;
        height: inherit;
    }

    figure {
        overflow-x: auto;
        margin: 1.2em 0px;
        max-width: calc(100% + 16px);
        padding: 0px;
    }

    figure > table {
        margin: 0px !important;
    }

    tr {
        break-inside: avoid;
        break-after: auto;
    }

    thead {
        display: table-header-group;
    }

    table {
        border-collapse: collapse;
        border-spacing: 0px;
        width: 100%;
        overflow: auto;
        break-inside: auto;
        text-align: left;
    }

    table.md-table td {
        min-width: 32px;
    }

    .CodeMirror-gutters {
        border-right: 0px;
        background-color: inherit;
    }

    .CodeMirror {
        text-align: left;
    }

    .CodeMirror-placeholder {
        opacity: 0.3;
    }

    .CodeMirror pre {
        padding: 0px 4px;
    }

    .CodeMirror-lines {
        padding: 0px;
    }

    div.hr:focus {
        cursor: none;
    }

    #write pre {
        white-space: pre-wrap;
    }

    #write.fences-no-line-wrapping pre {
        white-space: pre;
    }

    #write pre.ty-contain-cm {
        white-space: normal;
    }

    .CodeMirror-gutters {
        margin-right: 4px;
    }

    .md-fences {
        font-size: 0.9rem;
        display: block;
        break-inside: avoid;
        text-align: left;
        overflow: visible;
        white-space: pre;
        background: inherit;
        position: relative !important;
    }

    .md-diagram-panel {
        width: 100%;
        margin-top: 10px;
        text-align: center;
        padding-top: 0px;
        padding-bottom: 8px;
        overflow-x: auto;
    }

    #write .md-fences.mock-cm {
        white-space: pre-wrap;
    }

    .md-fences.md-fences-with-lineno {
        padding-left: 0px;
    }

    #write.fences-no-line-wrapping .md-fences.mock-cm {
        white-space: pre;
        overflow-x: auto;
    }

    .md-fences.mock-cm.md-fences-with-lineno {
        padding-left: 8px;
    }

    .CodeMirror-line, twitterwidget {
        break-inside: avoid;
    }

    .footnotes {
        opacity: 0.8;
        font-size: 0.9rem;
        margin-top: 1em;
        margin-bottom: 1em;
    }

    .footnotes + .footnotes {
        margin-top: 0px;
    }

    .md-reset {
        margin: 0px;
        padding: 0px;
        border: 0px;
        outline: 0px;
        vertical-align: top;
        background: 0px 0px;
        text-decoration: none;
        text-shadow: none;
        float: none;
        position: static;
        width: auto;
        height: auto;
        white-space: nowrap;
        cursor: inherit;
        -webkit-tap-highlight-color: transparent;
        line-height: normal;
        font-weight: 400;
        text-align: left;
        box-sizing: content-box;
        direction: ltr;
    }

    li div {
        padding-top: 0px;
    }

    blockquote {
        margin: 1rem 0px;
    }

    li .mathjax-block, li p {
        margin: 0.5rem 0px;
    }

    li {
        margin: 0px;
        position: relative;
    }

    blockquote > :last-child {
        margin-bottom: 0px;
    }

    blockquote > :first-child, li > :first-child {
        margin-top: 0px;
    }

    .footnotes-area {
        color: rgb(136, 136, 136);
        margin-top: 0.714rem;
        padding-bottom: 0.143rem;
        white-space: normal;
    }

    #write .footnote-line {
        white-space: pre-wrap;
    }

    @media print {
        body, html {
            border: 1px solid transparent;
            height: 99%;
            break-after: avoid;
            break-before: avoid;
        }

        #write {
            margin-top: 0px;
            padding-top: 0px;
            border-color: transparent !important;
        }

        .typora-export * {
            -webkit-print-color-adjust: exact;
        }

        html.blink-to-pdf {
            font-size: 13px;
        }

        .typora-export #write {
            padding-left: 32px;
            padding-right: 32px;
            padding-bottom: 0px;
            break-after: avoid;
        }

        .typora-export #write::after {
            height: 0px;
        }

        @page {
            margin: 20mm 0px;
        }
    }

    .footnote-line {
        margin-top: 0.714em;
        font-size: 0.7em;
    }

    a img, img a {
        cursor: pointer;
    }

    pre.md-meta-block {
        font-size: 0.8rem;
        min-height: 0.8rem;
        white-space: pre-wrap;
        background: rgb(204, 204, 204);
        display: block;
        overflow-x: hidden;
    }

    p > .md-image:only-child:not(.md-img-error) img, p > img:only-child {
        display: block;
        margin: auto;
    }

    p > .md-image:only-child {
        display: inline-block;
        width: 100%;
    }

    #write .MathJax_Display {
        margin: 0.8em 0px 0px;
    }

    .md-math-block {
        width: 100%;
    }

    .md-math-block:not(:empty)::after {
        display: none;
    }

    [contenteditable="true"]:active, [contenteditable="true"]:focus {
        outline: 0px;
        box-shadow: none;
    }

    .md-task-list-item {
        position: relative;
        list-style-type: none;
    }

    .task-list-item.md-task-list-item {
        padding-left: 0px;
    }

    .md-task-list-item > input {
        position: absolute;
        top: 0px;
        left: 0px;
        margin-left: -1.2em;
        margin-top: calc(1em - 10px);
        border: none;
    }

    .math {
        font-size: 1rem;
    }

    .md-toc {
        min-height: 3.58rem;
        position: relative;
        font-size: 0.9rem;
        border-radius: 10px;
    }

    .md-toc-content {
        position: relative;
        margin-left: 0px;
    }

    .md-toc-content::after, .md-toc::after {
        display: none;
    }

    .md-toc-item {
        display: block;
        color: rgb(65, 131, 196);
    }

    .md-toc-item a {
        text-decoration: none;
    }

    .md-toc-inner:hover {
        text-decoration: underline;
    }

    .md-toc-inner {
        display: inline-block;
        cursor: pointer;
    }

    .md-toc-h1 .md-toc-inner {
        margin-left: 0px;
        font-weight: 700;
    }

    .md-toc-h2 .md-toc-inner {
        margin-left: 2em;
    }

    .md-toc-h3 .md-toc-inner {
        margin-left: 4em;
    }

    .md-toc-h4 .md-toc-inner {
        margin-left: 6em;
    }

    .md-toc-h5 .md-toc-inner {
        margin-left: 8em;
    }

    .md-toc-h6 .md-toc-inner {
        margin-left: 10em;
    }

    @media screen and (max-width: 48em) {
        .md-toc-h3 .md-toc-inner {
            margin-left: 3.5em;
        }

        .md-toc-h4 .md-toc-inner {
            margin-left: 5em;
        }

        .md-toc-h5 .md-toc-inner {
            margin-left: 6.5em;
        }

        .md-toc-h6 .md-toc-inner {
            margin-left: 8em;
        }
    }

    a.md-toc-inner {
        font-size: inherit;
        font-style: inherit;
        font-weight: inherit;
        line-height: inherit;
    }

    .footnote-line a:not(.reversefootnote) {
        color: inherit;
    }

    .md-attr {
        display: none;
    }

    .md-fn-count::after {
        content: ".";
    }

    code, pre, samp, tt {
        font-family: var(--monospace);
    }

    kbd {
        margin: 0px 0.1em;
        padding: 0.1em 0.6em;
        font-size: 0.8em;
        color: rgb(36, 39, 41);
        background: rgb(255, 255, 255);
        border: 1px solid rgb(173, 179, 185);
        border-radius: 3px;
        box-shadow: rgba(12, 13, 14, 0.2) 0px 1px 0px, rgb(255, 255, 255) 0px 0px 0px 2px inset;
        white-space: nowrap;
        vertical-align: middle;
    }

    .md-comment {
        color: rgb(162, 127, 3);
        opacity: 0.8;
        font-family: var(--monospace);
    }

    code {
        text-align: left;
        vertical-align: initial;
    }

    a.md-print-anchor {
        white-space: pre !important;
        border-width: initial !important;
        border-style: none !important;
        border-color: initial !important;
        display: inline-block !important;
        position: absolute !important;
        width: 1px !important;
        right: 0px !important;
        outline: 0px !important;
        background: 0px 0px !important;
        text-decoration: initial !important;
        text-shadow: initial !important;
    }

    .md-inline-math .MathJax_SVG .noError {
        display: none !important;
    }

    .html-for-mac .inline-math-svg .MathJax_SVG {
        vertical-align: 0.2px;
    }

    .md-math-block .MathJax_SVG_Display {
        text-align: center;
        margin: 0px;
        position: relative;
        text-indent: 0px;
        max-width: none;
        max-height: none;
        min-height: 0px;
        min-width: 100%;
        width: auto;
        overflow-y: hidden;
        display: block !important;
    }

    .MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display {
        width: auto;
        margin: inherit;
        display: inline-block !important;
    }

    .MathJax_SVG .MJX-monospace {
        font-family: var(--monospace);
    }

    .MathJax_SVG .MJX-sans-serif {
        font-family: sans-serif;
    }

    .MathJax_SVG {
        display: inline;
        font-style: normal;
        font-weight: 400;
        line-height: normal;
        zoom: 90%;
        text-indent: 0px;
        text-align: left;
        text-transform: none;
        letter-spacing: normal;
        word-spacing: normal;
        word-wrap: normal;
        white-space: nowrap;
        float: none;
        direction: ltr;
        max-width: none;
        max-height: none;
        min-width: 0px;
        min-height: 0px;
        border: 0px;
        padding: 0px;
        margin: 0px;
    }

    .MathJax_SVG * {
        transition: none;
    }

    .MathJax_SVG_Display svg {
        vertical-align: middle !important;
        margin-bottom: 0px !important;
    }

    .os-windows.monocolor-emoji .md-emoji {
        font-family: "Segoe UI Symbol", sans-serif;
    }

    .md-diagram-panel > svg {
        max-width: 100%;
    }

    [lang="mermaid"] svg, [lang="flow"] svg {
        max-width: 100%;
    }

    [lang="mermaid"] .node text {
        font-size: 1rem;
    }

    table tr th {
        border-bottom: 0px;
    }

    video {
        max-width: 100%;
        display: block;
        margin: 0px auto;
    }

    iframe {
        max-width: 100%;
        width: 100%;
        border: none;
    }

    .highlight td, .highlight tr {
        border: 0px;
    }


    .CodeMirror {
        height: auto;
    }

    .CodeMirror.cm-s-inner {
        background: inherit;
    }

    .CodeMirror-scroll {
        overflow-y: hidden;
        overflow-x: auto;
        z-index: 3;
    }

    .CodeMirror-gutter-filler, .CodeMirror-scrollbar-filler {
        background-color: rgb(255, 255, 255);
    }

    .CodeMirror-gutters {
        border-right: 1px solid rgb(221, 221, 221);
        background: inherit;
        white-space: nowrap;
    }

    .CodeMirror-linenumber {
        padding: 0px 3px 0px 5px;
        text-align: right;
        color: rgb(153, 153, 153);
    }

    .cm-s-inner .cm-keyword {
        color: rgb(119, 0, 136);
    }

    .cm-s-inner .cm-atom, .cm-s-inner.cm-atom {
        color: rgb(34, 17, 153);
    }

    .cm-s-inner .cm-number {
        color: rgb(17, 102, 68);
    }

    .cm-s-inner .cm-def {
        color: rgb(0, 0, 255);
    }

    .cm-s-inner .cm-variable {
        color: rgb(0, 0, 0);
    }

    .cm-s-inner .cm-variable-2 {
        color: rgb(0, 85, 170);
    }

    .cm-s-inner .cm-variable-3 {
        color: rgb(0, 136, 85);
    }

    .cm-s-inner .cm-string {
        color: rgb(170, 17, 17);
    }

    .cm-s-inner .cm-property {
        color: rgb(0, 0, 0);
    }

    .cm-s-inner .cm-operator {
        color: rgb(152, 26, 26);
    }

    .cm-s-inner .cm-comment, .cm-s-inner.cm-comment {
        color: rgb(170, 85, 0);
    }

    .cm-s-inner .cm-string-2 {
        color: rgb(255, 85, 0);
    }

    .cm-s-inner .cm-meta {
        color: rgb(85, 85, 85);
    }

    .cm-s-inner .cm-qualifier {
        color: rgb(85, 85, 85);
    }

    .cm-s-inner .cm-builtin {
        color: rgb(51, 0, 170);
    }

    .cm-s-inner .cm-bracket {
        color: rgb(153, 153, 119);
    }

    .cm-s-inner .cm-tag {
        color: rgb(17, 119, 0);
    }

    .cm-s-inner .cm-attribute {
        color: rgb(0, 0, 204);
    }

    .cm-s-inner .cm-header, .cm-s-inner.cm-header {
        color: rgb(0, 0, 255);
    }

    .cm-s-inner .cm-quote, .cm-s-inner.cm-quote {
        color: rgb(0, 153, 0);
    }

    .cm-s-inner .cm-hr, .cm-s-inner.cm-hr {
        color: rgb(153, 153, 153);
    }

    .cm-s-inner .cm-link, .cm-s-inner.cm-link {
        color: rgb(0, 0, 204);
    }

    .cm-negative {
        color: rgb(221, 68, 68);
    }

    .cm-positive {
        color: rgb(34, 153, 34);
    }

    .cm-header, .cm-strong {
        font-weight: 700;
    }

    .cm-del {
        text-decoration: line-through;
    }

    .cm-em {
        font-style: italic;
    }

    .cm-link {
        text-decoration: underline;
    }

    .cm-error {
        color: red;
    }

    .cm-invalidchar {
        color: red;
    }

    .cm-constant {
        color: rgb(38, 139, 210);
    }

    .cm-defined {
        color: rgb(181, 137, 0);
    }

    div.CodeMirror span.CodeMirror-matchingbracket {
        color: rgb(0, 255, 0);
    }

    div.CodeMirror span.CodeMirror-nonmatchingbracket {
        color: rgb(255, 34, 34);
    }

    .cm-s-inner .CodeMirror-activeline-background {
        background: inherit;
    }

    .CodeMirror {
        position: relative;
        overflow: hidden;
    }

    .CodeMirror-scroll {
        height: 100%;
        outline: 0px;
        position: relative;
        box-sizing: content-box;
        background: inherit;
    }

    .CodeMirror-sizer {
        position: relative;
    }

    .CodeMirror-gutter-filler, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-vscrollbar {
        position: absolute;
        z-index: 6;
        display: none;
    }

    .CodeMirror-vscrollbar {
        right: 0px;
        top: 0px;
        overflow: hidden;
    }

    .CodeMirror-hscrollbar {
        bottom: 0px;
        left: 0px;
        overflow: hidden;
    }

    .CodeMirror-scrollbar-filler {
        right: 0px;
        bottom: 0px;
    }

    .CodeMirror-gutter-filler {
        left: 0px;
        bottom: 0px;
    }

    .CodeMirror-gutters {
        position: absolute;
        left: 0px;
        top: 0px;
        padding-bottom: 30px;
        z-index: 3;
    }

    .CodeMirror-gutter {
        white-space: normal;
        height: 100%;
        box-sizing: content-box;
        padding-bottom: 30px;
        margin-bottom: -32px;
        display: inline-block;
    }

    .CodeMirror-gutter-wrapper {
        position: absolute;
        z-index: 4;
        background: 0px 0px !important;
        border: none !important;
    }

    .CodeMirror-gutter-background {
        position: absolute;
        top: 0px;
        bottom: 0px;
        z-index: 4;
    }

    .CodeMirror-gutter-elt {
        position: absolute;
        cursor: default;
        z-index: 4;
    }

    .CodeMirror-lines {
        cursor: text;
    }

    .CodeMirror pre {
        border-radius: 0px;
        border-width: 0px;
        background: 0px 0px;
        font-family: inherit;
        font-size: inherit;
        margin: 0px;
        white-space: pre;
        word-wrap: normal;
        color: inherit;
        z-index: 2;
        position: relative;
        overflow: visible;
    }

    .CodeMirror-wrap pre {
        word-wrap: break-word;
        white-space: pre-wrap;
        word-break: normal;
    }

    .CodeMirror-code pre {
        border-right: 30px solid transparent;
        width: fit-content;
    }

    .CodeMirror-wrap .CodeMirror-code pre {
        border-right: none;
        width: auto;
    }

    .CodeMirror-linebackground {
        position: absolute;
        left: 0px;
        right: 0px;
        top: 0px;
        bottom: 0px;
        z-index: 0;
    }

    .CodeMirror-linewidget {
        position: relative;
        z-index: 2;
        overflow: auto;
    }

    .CodeMirror-wrap .CodeMirror-scroll {
        overflow-x: hidden;
    }

    .CodeMirror-measure {
        position: absolute;
        width: 100%;
        height: 0px;
        overflow: hidden;
        visibility: hidden;
    }

    .CodeMirror-measure pre {
        position: static;
    }

    .CodeMirror div.CodeMirror-cursor {
        position: absolute;
        visibility: hidden;
        border-right: none;
        width: 0px;
    }

    .CodeMirror div.CodeMirror-cursor {
        visibility: hidden;
    }

    .CodeMirror-focused div.CodeMirror-cursor {
        visibility: inherit;
    }

    .cm-searching {
        background: rgba(255, 255, 0, 0.4);
    }

    @media print {
        .CodeMirror div.CodeMirror-cursor {
            visibility: hidden;
        }
    }


    :root {
        --active-file-bg-color: rgba(32, 43, 51, 0.63);
        --active-file-text-color: white;
        --bg-color: #f3f2ee;
        --text-color: #1f0909;
        --control-text-color: #444;
        --rawblock-edit-panel-bd: #e5e5e5;
        --select-text-bg-color: rgba(32, 43, 51, 0.63);
        --select-text-font-color: white;
    }

    pre {
        --select-text-bg-color: #36284e;
        --select-text-font-color: #fff;
    }

    html {
        font-size: 16px;
    }

    html, body {
        background-color: rgb(243, 242, 238);
        font-family: "PT Serif", "Times New Roman", Times, serif;
        color: rgb(31, 9, 9);
        line-height: 1.5em;
    }

    #write {
        max-width: 40em;
    }

    ol li {
        list-style-type: decimal;
        list-style-position: outside;
    }

    ul li {
        list-style-type: disc;
        list-style-position: outside;
    }

    ol, ul {
        list-style: none;
    }

    blockquote, q {
        quotes: none;
    }

    blockquote::before, blockquote::after, q::before, q::after {
        content: none;
    }

    table {
        border-collapse: collapse;
        border-spacing: 0px;
    }

    h1, h2, h3, h4, h5, h6 {
        font-weight: bold;
    }

    h1 {
        font-size: 1.875em;
        line-height: 1.6em;
        margin-top: 2em;
    }

    h2, h3 {
        font-size: 1.3125em;
        line-height: 1.15;
        margin-top: 2.28571em;
        margin-bottom: 1.15em;
    }

    h3 {
        font-weight: normal;
    }

    h4 {
        font-size: 1.125em;
        margin-top: 2.67em;
    }

    h5, h6 {
        font-size: 1em;
    }

    h1 {
        border-bottom: 1px solid;
        margin-bottom: 1.875em;
        padding-bottom: 0.8125em;
    }

    a {
        text-decoration: none;
        color: rgb(6, 85, 136);
    }

    a:hover, a:active {
        text-decoration: underline;
    }

    p, blockquote, .md-fences {
        margin-bottom: 1.5em;
    }

    h1, h2, h3, h4, h5, h6 {
        margin-bottom: 1.5em;
    }

    blockquote {
        font-style: italic;
        border-left: 5px solid;
        margin-left: 2em;
        padding-left: 1em;
    }

    ul, ol {
        margin: 0px 0px 1.5em 1.5em;
    }

    .md-meta, .md-before, .md-after {
        color: rgb(153, 153, 153);
    }

    table {
        margin-bottom: 1.5em;
        font-size: 1em;
    }

    thead th, tfoot th {
        padding: 0.25em 0.25em 0.25em 0.4em;
        text-transform: uppercase;
    }

    th {
        text-align: left;
    }

    td {
        vertical-align: top;
        padding: 0.25em 0.25em 0.25em 0.4em;
    }

    code, .md-fences {
        background-color: rgb(218, 218, 218);
    }

    code {
        padding-left: 2px;
        padding-right: 2px;
    }

    .md-fences {
        margin-left: 2em;
        margin-bottom: 3em;
        padding-left: 1ch;
        padding-right: 1ch;
    }

    pre, code, tt {
        font-size: 0.875em;
        line-height: 1.71429em;
    }

    h1 {
        line-height: 1.3em;
        font-weight: normal;
        margin-bottom: 0.5em;
    }

    p + ul, p + ol {
        margin-top: 0.5em;
    }

    h3 + ul, h4 + ul, h5 + ul, h6 + ul, h3 + ol, h4 + ol, h5 + ol, h6 + ol {
        margin-top: 0.5em;
    }

    li > ul, li > ol {
        margin-top: inherit;
        margin-bottom: 0px;
    }

    li ol > li {
        list-style-type: lower-alpha;
    }

    li li ol > li {
        list-style-type: lower-roman;
    }

    h2, h3 {
        margin-bottom: 0.75em;
    }

    hr {
        border-top: none;
        border-right: none;
        border-bottom: 1px solid;
        border-left: none;
    }

    h1 {
        border-color: rgb(197, 197, 197);
    }

    blockquote {
        border-color: rgb(186, 186, 186);
        color: rgb(101, 101, 101);
    }

    blockquote ul, blockquote ol {
        margin-left: 0px;
    }

    .ty-table-edit {
        background-color: transparent;
    }

    thead {
        background-color: rgb(218, 218, 218);
    }

    tr:nth-child(2n) {
        background: rgb(232, 231, 231);
    }

    hr {
        border-color: rgb(197, 197, 197);
    }

    .task-list {
        padding-left: 1rem;
    }

    .md-task-list-item {
        padding-left: 1.5rem;
        list-style-type: none;
    }

    .md-task-list-item > input::before {
        content: "√";
        display: inline-block;
        width: 1.25rem;
        height: 1.6rem;
        vertical-align: middle;
        text-align: center;
        color: rgb(221, 221, 221);
        background-color: rgb(243, 242, 238);
    }

    .md-task-list-item > input:checked::before, .md-task-list-item > input[checked]::before {
        color: inherit;
    }

    #write pre.md-meta-block {
        min-height: 1.875rem;
        color: rgb(85, 85, 85);
        border: 0px;
        background: transparent;
        margin-left: 1em;
        margin-top: 1em;
    }

    .md-image > .md-meta {
        color: rgb(155, 81, 70);
    }

    .md-image > .md-meta {
        font-family: Menlo, "Ubuntu Mono", Consolas, "Courier New", "Microsoft Yahei", "Hiragino Sans GB", "WenQuanYi Micro Hei", serif;
    }

    #write > h3.md-focus::before {
        left: -1.5rem;
        color: rgb(153, 153, 153);
        border-color: rgb(153, 153, 153);
    }

    #write > h4.md-focus::before {
        left: -1.5rem;
        top: 0.25rem;
        color: rgb(153, 153, 153);
        border-color: rgb(153, 153, 153);
    }

    #write > h5.md-focus::before {
        left: -1.5rem;
        color: rgb(153, 153, 153);
        border-color: rgb(153, 153, 153);
    }

    #write > h6.md-focus::before {
        left: -1.5rem;
        top: 0.3125rem;
        color: rgb(153, 153, 153);
        border-color: rgb(153, 153, 153);
    }

    .md-toc:focus .md-toc-content {
        margin-top: 19px;
    }

    .md-toc-content:empty::before {
        color: rgb(6, 85, 136);
    }

    .md-toc-item {
        color: rgb(6, 85, 136);
    }

    #write div.md-toc-tooltip {
        background-color: rgb(243, 242, 238);
    }

    #typora-sidebar {
        background-color: rgb(243, 242, 238);
        box-shadow: rgba(0, 0, 0, 0.376) 0px 6px 12px;
    }

    .pin-outline #typora-sidebar {
        background: inherit;
        box-shadow: none;
        border-right: 1px dashed;
    }

    .pin-outline #typora-sidebar:hover .outline-title-wrapper {
        border-left: 1px dashed;
    }

    .outline-item:hover {
        background-color: rgb(218, 218, 218);
        border-left: 28px solid rgb(218, 218, 218);
        border-right: 18px solid rgb(218, 218, 218);
    }

    .typora-node .outline-item:hover {
        border-right: 28px solid rgb(218, 218, 218);
    }

    .outline-expander::before {
        content: "";
        font-family: FontAwesome;
        font-size: 14px;
        top: 1px;
    }

    .outline-expander:hover::before, .outline-item-open > .outline-item > .outline-expander::before {
        content: "";
    }

    .modal-content {
        background-color: rgb(243, 242, 238);
    }

    .auto-suggest-container ul li {
        list-style-type: none;
    }

    .megamenu-menu, #top-titlebar, #top-titlebar *, .megamenu-content {
        background: rgb(243, 242, 238);
        color: rgb(31, 9, 9);
    }

    .megamenu-menu-header {
        border-bottom: 1px dashed rgb(32, 43, 51);
    }

    .megamenu-menu {
        box-shadow: none;
        border-right: 1px dashed;
    }

    header, .context-menu, .megamenu-content, footer {
        font-family: "PT Serif", "Times New Roman", Times, serif;
        color: rgb(31, 9, 9);
    }

    #megamenu-back-btn {
        color: rgb(31, 9, 9);
        border-color: rgb(31, 9, 9);
    }

    .megamenu-menu-header #megamenu-menu-header-title::before {
        color: rgb(31, 9, 9);
    }

    .megamenu-menu-list li a:hover, .megamenu-menu-list li a.active {
        color: inherit;
        background-color: rgb(232, 231, 223);
    }

    .long-btn:hover {
        background-color: rgb(232, 231, 223);
    }

    #recent-file-panel tbody tr:nth-child(2n-1) {
        background-color: transparent !important;
    }

    .megamenu-menu-panel tbody tr:hover td:nth-child(2) {
        color: inherit;
    }

    .megamenu-menu-panel .btn {
        background-color: rgb(210, 209, 209);
    }

    .btn-default {
        background-color: transparent;
    }

    .typora-sourceview-on #toggle-sourceview-btn, .ty-show-word-count #footer-word-count {
        background: rgb(199, 197, 197);
    }

    #typora-quick-open {
        background-color: inherit;
    }

    .md-diagram-panel {
        margin-top: 8px;
    }

    .file-list-item-file-name {
        font-weight: initial;
    }

    .file-list-item-summary {
        opacity: 1;
    }

    .file-list-item {
        color: rgb(119, 119, 119);
    }

    .file-list-item.active {
        background-color: inherit;
        color: black;
    }

    .ty-side-sort-btn.active {
        background-color: inherit;
    }

    .file-list-item.active .file-list-item-file-name {
        font-weight: bold;
    }

    .file-list-item {
        opacity: 1 !important;
    }

    .file-library-node.active > .file-node-background {
        background-color: var(--active-file-bg-color);
    }

    .file-tree-node.active > .file-node-content {
        color: var(--active-file-text-color);
    }

    .md-task-list-item > input {
        margin-left: -1.6em;
        margin-top: calc(1rem - 12px);
    }

    input {
        border: 1px solid rgb(170, 170, 170);
    }

    .megamenu-menu-header #megamenu-menu-header-title, .megamenu-menu-header:hover, .megamenu-menu-header:focus {
        color: inherit;
    }

    .dropdown-menu .divider {
        border-color: rgb(229, 229, 229);
    }

    .os-windows-7 strong, .os-windows-7 strong {
        font-weight: 760;
    }


    .typora-export li, .typora-export p, .typora-export, .footnote-line {
        white-space: normal;
    }
    </style>
</head>
<body class='typora-export os-windows'>
<div id='write' class='is-node'><h1><a name='header-n0' class='md-header-anchor '></a>第一章 JDBC概述</h1>
    <p>之前我们学习了JavaSE，编写了Java程序，数据保存在变量、数组、集合等中，无法持久化，后来学习了IO流可以将数据写入文件，但不方便管理数据以及维护数据的关系；</p>
    <p>后来我们学习了数据库管理软件MySQL，可以方便的管理数据。</p>
    <p>那么如何将它俩结合起来呢？即Java程序&lt;==&gt;MySQL，实现数据的存储和处理。</p>
    <p>那么就可以使用JDBC技术。</p>
    <h2><a name='header-n6' class='md-header-anchor '></a>1.1 JDBC概述</h2>
    <p>JDBC：Java Database
        Connectivity，它是代表一组独立于任何数据库管理系统（DBMS）的API，声明在java.sql与javax.sql包中，是SUN(现在Oracle)提供的一组接口规范。由各个数据库厂商来提供实现类，这些实现类的集合构成了数据库驱动jar。</p>
    <p><img src='imgs/1561212287381.png' alt='1561212287381' referrerPolicy='no-referrer'/></p>
    <p>即JDBC技术包含两个部分：</p>
    <p>（1）java.sql包和javax.sql包中的API</p>
    <blockquote><p>因为为了项目代码的可移植性，可维护性，SUN公司从最初就制定了Java程序连接各种数据库的统一接口规范。这样的话，不管是连接哪一种DBMS软件，Java代码可以保持一致性。</p>
    </blockquote>
    <p>（2）各个数据库厂商提供的jar</p>
    <blockquote><p>因为各个数据库厂商的DBMS软件各有不同，那么内部如何通过sql实现增、删、改、查等管理数据，只有这个数据库厂商自己更清楚，因此把接口规范的实现交给各个数据库厂商自己实现。</p>
    </blockquote>
    <h2><a name='header-n16' class='md-header-anchor '></a>1.2 JDBC使用步骤</h2>
    <p>代码编写步骤：</p>
    <h3><a name='header-n18' class='md-header-anchor '></a>1、注册驱动</h3>
    <p>三部曲：</p>
    <p>（1）将DBMS数据库管理软件的驱动jar拷贝到项目的libs目录中</p>
    <p>例如：mysql-connector-java-5.1.36-bin.jar</p>
    <p>（2）把驱动jar添加到项目的build path中</p>
    <p>（3）将驱动类加载到内存中</p>
    <p>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</p>
    <h3><a name='header-n25' class='md-header-anchor '></a>2、获取Connection连接对象</h3>
    <p>Connection conn = DriverManager.getConnection(url,username,password);</p>
    <p>mysql的url：jdbc:mysql://localhost:3306/数据库名?参数名=参数值</p>
    <p>jdbc:mysql://localhost:3306/testdb?useUnicode=true&amp;characterEncoding=utf8（如果JDBC程序与服务器端的字符集不一致，会导致乱码，那么可以通过参数指定服务器端的字符集</p>
    <h3><a name='header-n29' class='md-header-anchor '></a>3、执行sql并处理结果</h3>
    <p>（1）编写sql</p>
    <p>（2）创建Statement或PreparedStatement对象</p>
    <p>（3）执行sql</p>
    <p>增删改：调用executeUpate方法</p>
    <p>查询：调用executeQuery方法</p>
    <p>（4）处理结果</p>
    <p>增删改：返回的是整数值</p>
    <p>查询：返回ResultSet结果，需要使用next()和getXxx()结合进行遍历</p>
    <h3><a name='header-n38' class='md-header-anchor '></a>4、释放连接等</h3>
    <p><img src='imgs/1561213163143.png' alt='1561213163143' referrerPolicy='no-referrer'/></p>
    <p>相关的API：</p>
    <p>1、DriverManager：驱动管理类</p>
    <p>2、Connection：代表数据库连接</p>
    <p>3、Statement和PreparedStatement：用来执行sql</p>
    <p><span>	</span>执行增、删、改：int executeUpate()</p>
    <p><span>	</span>执行查询：ResultSet executeQuery()</p>
    <p>4、如何遍历ResultSet ？</p>
    <p><span>	</span>（1）boolean next()：判断是否还有下一行</p>
    <p><span>	</span>（2）getString(字段名或序号),getInt(字段名或序号),getObject(字段名或序号)</p>
    <p>示例代码1：增、删、改</p>
    <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"
         style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div
            style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea
            autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
            style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
            class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                 cm-not-content="true"></div><div
            class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                         style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
            style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
            role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div
            class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
            class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                      style="position: relative;"><div
            class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
            class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span class="cm-def">TestJDBC</span> {</span></pre></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">public</span> <span
            class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span
            class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span
            class="cm-variable">args</span>) <span class="cm-keyword">throws</span> <span class="cm-variable">ClassNotFoundException</span>, <span
            class="cm-variable">SQLException</span> {</span></pre><pre class=" CodeMirror-line "
                                                                       role="presentation"><span role="presentation"
                                                                                                 style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-comment">//1、注册驱动</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">//(1)方式一：Class.forName("驱动类的全名称")</span></span></pre><pre class=" CodeMirror-line "
                                                                                         role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">Class</span>.<span class="cm-variable">forName</span>(<span class="cm-string">"com.mysql.jdbc.Driver"</span>);</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack"
                                                                style="padding-right: 0.1px;"><span class="cm-comment">//<span
            class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation"
                                                                             cm-text="	">    </span>(2)创建驱动类的对象</span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack"
                                                                style="padding-right: 0.1px;"><span class="cm-comment">//<span
            class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation"
                                                                             cm-text="	">    </span>new com.mysql.jdbc.Driver();//硬编码</span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-comment">//(3)通过DriverManager注册驱动</span></span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
            role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-comment">//<span
            class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-tab" role="presentation"
                                                                             cm-text="	">    </span>DriverManager.registerDriver(new com.mysql.jdbc.Driver());//硬编码</span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack"
                                                                style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">//2、获取连接，连接数据库</span></span></pre><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span
            class="cm-comment">//TCP/IP协议编程，需要服务器的IP地址和端口号</span></span></pre><pre class=" CodeMirror-line "
                                                                                   role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">//mysql的url格式：jdbc协议:子协议://主机名:端口号/要连接的数据库名</span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable-3">String</span> <span class="cm-variable">url</span> <span class="cm-operator">=</span> <span
            class="cm-string">"jdbc:mysql://localhost:3306/test"</span>;<span
            class="cm-comment">//其中test是数据库名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable-3">String</span> <span class="cm-variable">user</span> <span class="cm-operator">=</span> <span
            class="cm-string">"root"</span>;</span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable-3">String</span> <span class="cm-variable">password</span> <span
            class="cm-operator">=</span> <span class="cm-string">"123456"</span>;</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable">Connection</span> <span class="cm-variable">conn</span> <span
            class="cm-operator">=</span> <span class="cm-variable">DriverManager</span>.<span class="cm-variable">getConnection</span>(<span
            class="cm-variable">url</span>, <span class="cm-variable">user</span>, <span
            class="cm-variable">password</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                             role="presentation"
                                                                                             cm-text="	">    </span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-comment">//3、执行sql</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">//添加一个部门到数据库的t_department表中</span></span></pre><pre class=" CodeMirror-line "
                                                                                   role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">//(1)编写sql</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable-3">String</span> <span class="cm-variable">sql</span> <span class="cm-operator">=</span> <span
            class="cm-string">"insert into t_department values(null,'计算部2','计算钞票2')"</span>;</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-comment">/*</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                             role="presentation"
                                                                                             cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span> <span class="cm-comment">* 回忆：<span
            class="cm-tab" role="presentation" cm-text="	">  </span>TCP/IP程序时</span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span> <span
            class="cm-comment">* Socket代表连接</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span> <span
            class="cm-comment">* socket.getOutputStream()来发送数据，</span></span></pre><pre class=" CodeMirror-line "
                                                                                        role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span> <span
            class="cm-comment">* socket.getInputStream()来接收数据</span></span></pre><pre class=" CodeMirror-line "
                                                                                      role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span> <span
            class="cm-comment">* </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span> <span
            class="cm-comment">* 可以把Connection比喻成Socket</span></span></pre><pre class=" CodeMirror-line "
                                                                                role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span> <span
            class="cm-comment">* &nbsp;  把Statement比喻成OutputStream</span></span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span> <span
            class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">//(2)获取Statement对象</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">Statement</span> <span class="cm-variable">st</span> <span class="cm-operator">=</span> <span
            class="cm-variable">conn</span>.<span class="cm-variable">createStatement</span>();</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-comment">//(3)执行sql</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable-3">int</span> <span class="cm-variable">len</span> <span
            class="cm-operator">=</span> <span class="cm-variable">st</span>.<span
            class="cm-variable">executeUpdate</span>(<span class="cm-variable">sql</span>);</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-comment">//(4)处理结果</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span
            class="cm-variable">println</span>(<span class="cm-variable">len</span><span class="cm-operator">&gt;</span><span
            class="cm-number">0</span><span class="cm-operator">?</span><span class="cm-string">"成功"</span>:<span
            class="cm-string">"失败"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                             role="presentation"
                                                                                             cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">//4、关闭</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">st</span>.<span class="cm-variable">close</span>();</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable">conn</span>.<span class="cm-variable">close</span>();</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line "
                                                                                            role="presentation"><span
            role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div
            style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1899px;"></div><div
            class="CodeMirror-gutters" style="display: none; height: 1899px;"></div></div></div></pre>
    <p>示例代码2：查询</p>
    <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"
         style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div
            style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea
            autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
            style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
            class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                 cm-not-content="true"></div><div
            class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                         style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
            style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
            role="presentation" style="position: relative; outline: none;"><div
            class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div
            style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div
            class="CodeMirror-activeline" style="position: relative;"><div
            class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
            class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-keyword">public</span> <span class="cm-keyword">class</span> <span
            class="cm-def">TestSelect</span> {</span></pre></div><pre class=" CodeMirror-line "
                                                                      role="presentation"><span role="presentation"
                                                                                                style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">public</span> <span
            class="cm-keyword">static</span> <span class="cm-variable-3">void</span> <span
            class="cm-variable">main</span>(<span class="cm-variable-3">String</span>[] <span
            class="cm-variable">args</span>) <span class="cm-keyword">throws</span> <span
            class="cm-variable">Exception</span>{</span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">// 1、注册驱动</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">Class</span>.<span class="cm-variable">forName</span>(<span class="cm-string">"com.mysql.jdbc.Driver"</span>);</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-comment">// 2、连接数据库</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">Connection</span> <span class="cm-variable">conn</span> <span
            class="cm-operator">=</span> <span class="cm-variable">DriverManager</span>.<span class="cm-variable">getConnection</span>(<span
            class="cm-string">"jdbc:mysql://localhost:3306/test"</span>, <span class="cm-string">"root"</span>, <span
            class="cm-string">"123456"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-comment">// 3、执行sql</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable-3">String</span> <span class="cm-variable">sql</span> <span class="cm-operator">=</span> <span
            class="cm-string">"SELECT * FROM t_department"</span>;</span></pre><pre class=" CodeMirror-line "
                                                                                    role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">Statement</span> <span class="cm-variable">st</span> <span class="cm-operator">=</span> <span
            class="cm-variable">conn</span>.<span class="cm-variable">createStatement</span>();</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack"
                                                                style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">ResultSet</span> <span class="cm-variable">rs</span> <span class="cm-operator">=</span> <span
            class="cm-variable">st</span>.<span class="cm-variable">executeQuery</span>(<span
            class="cm-variable">sql</span>);<span class="cm-comment">//ResultSet看成InputStream</span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-keyword">while</span>(<span class="cm-variable">rs</span>.<span class="cm-variable">next</span>()){<span
            class="cm-comment">//next()表示是否还有下一行</span></span></pre><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">Object</span> <span
            class="cm-variable">did</span> <span class="cm-operator">=</span> <span class="cm-variable">rs</span>.<span
            class="cm-variable">getObject</span>(<span class="cm-number">1</span>);<span
            class="cm-comment">//获取第n列的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">Object</span> <span
            class="cm-variable">dname</span> <span class="cm-operator">=</span> <span
            class="cm-variable">rs</span>.<span class="cm-variable">getObject</span>(<span class="cm-number">2</span>);</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable-3">Object</span> <span
            class="cm-variable">desc</span> <span class="cm-operator">=</span> <span class="cm-variable">rs</span>.<span
            class="cm-variable">getObject</span>(<span class="cm-number">3</span>);</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">/*</span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">int did = rs.getInt("did");//也可以根据列名称，并且可以按照数据类型获取</span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">String dname = rs.getString("dname");</span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">String desc = rs.getString("description");</span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span> <span
            class="cm-comment">*/</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                             role="presentation"
                                                                                             cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">System</span>.<span
            class="cm-variable">out</span>.<span class="cm-variable">println</span>(<span class="cm-variable">did</span> <span
            class="cm-operator">+</span><span class="cm-string">"\t"</span> <span class="cm-operator">+</span> <span
            class="cm-variable">dname</span> <span class="cm-operator">+</span> <span class="cm-string">"\t"</span><span
            class="cm-operator">+</span> <span class="cm-variable">desc</span>);</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span>}</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            cm-text="">​</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation"
                                                                                                     style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-comment">// 4、关闭</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">rs</span>.<span class="cm-variable">close</span>();</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable">st</span>.<span class="cm-variable">close</span>();</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable">conn</span>.<span class="cm-variable">close</span>();</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span>}</span></pre><pre class=" CodeMirror-line "
                                                                                            role="presentation"><span
            role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div
            style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1307px;"></div><div
            class="CodeMirror-gutters" style="display: none; height: 1307px;"></div></div></div></pre>
    <h1><a name='header-n53' class='md-header-anchor '></a>第二章 使用PreparedStatement处理CRUD</h1>
    <h2><a name='header-n54' class='md-header-anchor '></a>2.1 通过PreparedStatement来解决Statement的问题</h2>
    <p>Statement的问题：通过PreparedStatement来代替</p>
    <p>（1）sql拼接</p>
    <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div
            class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div
            style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea
            autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
            style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
            class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                 cm-not-content="true"></div><div
            class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                         style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
            style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
            role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
            class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
            class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div
            class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
            class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable-3">String</span> <span class="cm-variable">sql</span> <span class="cm-operator">=</span> <span
            class="cm-string">"insert into t_employee(ename,tel,gender,salary) values('"</span> <span
            class="cm-operator">+</span> <span class="cm-variable">ename</span> <span class="cm-operator">+</span> <span
            class="cm-string">"','"</span> <span class="cm-operator">+</span> <span class="cm-variable">tel</span> <span
            class="cm-operator">+</span> <span class="cm-string">"','"</span> <span class="cm-operator">+</span> <span
            class="cm-variable">gender</span> <span class="cm-operator">+</span> <span
            class="cm-string">"',"</span> <span class="cm-operator">+</span> <span
            class="cm-variable">salary</span> <span class="cm-operator">+</span><span
            class="cm-string">")"</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">Statement</span> <span class="cm-variable">st</span> <span class="cm-operator">=</span> <span
            class="cm-variable">conn</span>.<span class="cm-variable">createStatement</span>();</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable-3">int</span> <span class="cm-variable">len</span> <span
            class="cm-operator">=</span> <span class="cm-variable">st</span>.<span
            class="cm-variable">executeUpdate</span>(<span
            class="cm-variable">sql</span>);</span></pre></div></div></div></div></div><div
            style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 247px;"></div><div
            class="CodeMirror-gutters" style="display: none; height: 247px;"></div></div></div></pre>
    <p>（2）sql注入</p>
    <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div
            class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div
            style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea
            autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
            style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
            class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                 cm-not-content="true"></div><div
            class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                         style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
            style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
            role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
            class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
            class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                      style="position: relative;"><div
            class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
            class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable-3">String</span> <span class="cm-variable">sql</span> <span class="cm-operator">=</span> <span
            class="cm-string">"SELECT * FROM t_employee where ename='"</span> <span class="cm-operator">+</span> <span
            class="cm-variable">ename</span> <span class="cm-operator">+</span> <span
            class="cm-string">"'"</span>;</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">//如果我此时从键盘输入ename值的时候，输入：张三' or '1'= '1</span></span></pre><pre class=" CodeMirror-line "
                                                                                               role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">//结果会把所有数据都查询出来</span></span></pre><pre class=" CodeMirror-line "
                                                                       role="presentation"><span role="presentation"
                                                                                                 style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable">Statement</span> <span class="cm-variable">st</span> <span class="cm-operator">=</span> <span
            class="cm-variable">conn</span>.<span class="cm-variable">createStatement</span>();</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable">ResultSet</span> <span class="cm-variable">rs</span> <span class="cm-operator">=</span> <span
            class="cm-variable">st</span>.<span class="cm-variable">executeQuery</span>(<span
            class="cm-variable">sql</span>);</span></pre></div></div></div></div></div><div
            style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 296px;"></div><div
            class="CodeMirror-gutters" style="display: none; height: 296px;"></div></div></div></pre>
    <p>（3）处理blob等类型的数据</p>
    <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div
            class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div
            style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea
            autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
            style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
            class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                 cm-not-content="true"></div><div
            class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                         style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
            style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
            role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
            class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
            class="CodeMirror-code" role="presentation"><div class="CodeMirror-activeline" style="position: relative;"><div
            class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
            class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-variable-3">String</span> <span class="cm-variable">sql</span> <span class="cm-operator">=</span> <span
            class="cm-string">"insert into user(username,photo) values('chailinyan', 图片字节流)"</span>;</span></pre></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-comment">//此时photo是blob类型的数据时，无法在sql中直接拼接</span></span></pre></div></div></div></div></div><div
            style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 148px;"></div><div
            class="CodeMirror-gutters" style="display: none; height: 148px;"></div></div></div></pre>
    <p>PreparedStatement解决问题：</p>
    <p>（1）避免sql拼接</p>
    <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"
         style="break-inside: unset;"><div class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div
            style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea
            autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
            style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
            class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                 cm-not-content="true"></div><div
            class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                         style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
            style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
            role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
            class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
            class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                      style="position: relative;"><div
            class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
            class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable-3">String</span> <span class="cm-variable">sql</span> <span class="cm-operator">=</span> <span
            class="cm-string">"insert into t_employee(ename,tel,gender,salary) values(?,?,?,?)"</span>;</span></pre></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable">PreparedStatement</span> <span class="cm-variable">pst</span> <span class="cm-operator">=</span> <span
            class="cm-variable">conn</span>.<span class="cm-variable">prepareStatement</span>(<span class="cm-variable">sql</span>);<span
            class="cm-comment">//这里要传带？的sql，然后mysql端就会对这个sql进行预编译</span></span></pre><pre class=" CodeMirror-line "
                                                                                          role="presentation"><span
            role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                             role="presentation"
                                                                                             cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">//设置？的具体值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">/*pst.setString(1, ename);</span></span></pre><pre class=" CodeMirror-line "
                                                                                  role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">pst.setString(2, tel);</span></span></pre><pre class=" CodeMirror-line "
                                                                              role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">pst.setString(3, gender);</span></span></pre><pre class=" CodeMirror-line "
                                                                                 role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">pst.setDouble(4, salary);*/</span></span></pre><pre class=" CodeMirror-line "
                                                                                   role="presentation"><span
            role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                             role="presentation"
                                                                                             cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">pst</span>.<span class="cm-variable">setObject</span>(<span class="cm-number">1</span>, <span
            class="cm-variable">ename</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">pst</span>.<span class="cm-variable">setObject</span>(<span class="cm-number">2</span>, <span
            class="cm-variable">tel</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">pst</span>.<span class="cm-variable">setObject</span>(<span class="cm-number">3</span>, <span
            class="cm-variable">gender</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">pst</span>.<span class="cm-variable">setObject</span>(<span class="cm-number">4</span>, <span
            class="cm-variable">salary</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                             role="presentation"
                                                                                             cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable-3">int</span> <span class="cm-variable">len</span> <span
            class="cm-operator">=</span> <span class="cm-variable">pst</span>.<span
            class="cm-variable">executeUpdate</span>();<span class="cm-comment">//此处不能传sql</span></span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span
            class="cm-variable">println</span>(<span
            class="cm-variable">len</span>);</span></pre></div></div></div></div></div><div
            style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 789px;"></div><div
            class="CodeMirror-gutters" style="display: none; height: 789px;"></div></div></div></pre>
    <p>（2）不会有sql注入</p>
    <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div
            class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div
            style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea
            autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
            style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
            class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                 cm-not-content="true"></div><div
            class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                         style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
            style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
            role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
            class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
            class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                      style="position: relative;"><div
            class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
            class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable-3">String</span> <span class="cm-variable">sql</span> <span class="cm-operator">=</span> <span
            class="cm-string">"SELECT * FROM t_employee where ename=?"</span>;</span></pre></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-comment">//即使输入'张三' or '1'= '1'也没问题</span></span></pre><pre class=" CodeMirror-line "
                                                                                  role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">PreparedStatement</span> <span class="cm-variable">pst</span> <span class="cm-operator">=</span> <span
            class="cm-variable">conn</span>.<span class="cm-variable">prepareStatement</span>(<span class="cm-variable">sql</span>);</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack"
                                                                style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">//中间加入设置？的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">pst</span>.<span class="cm-variable">setObject</span>(<span class="cm-number">1</span>, <span
            class="cm-variable">ename</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                             role="presentation"
                                                                                             cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">ResultSet</span> <span class="cm-variable">rs</span> <span class="cm-operator">=</span> <span
            class="cm-variable">pst</span>.<span
            class="cm-variable">executeQuery</span>();</span></pre></div></div></div></div></div><div
            style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 345px;"></div><div
            class="CodeMirror-gutters" style="display: none; height: 345px;"></div></div></div></pre>
    <p>（3）处理blob类型的数据</p>
    <pre spellcheck="false" class="md-fences md-end-block ty-contain-cm modeLoaded" lang="java"><div
            class="CodeMirror cm-s-inner CodeMirror-wrap" lang="java"><div
            style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 0px; left: 4px;"><textarea
            autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0"
            style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div
            class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler"
                                                                                 cm-not-content="true"></div><div
            class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer"
                                                         style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div
            style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div
            role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div
            class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div
            class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline"
                                                                      style="position: relative;"><div
            class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div
            class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable-3">String</span> <span class="cm-variable">sql</span> <span class="cm-operator">=</span> <span
            class="cm-string">"insert into user(username,photo) values(?,?)"</span>;</span></pre></div><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable">PreparedStatement</span> <span class="cm-variable">pst</span> <span class="cm-operator">=</span> <span
            class="cm-variable">conn</span>.<span class="cm-variable">prepareStatement</span>(<span class="cm-variable">sql</span>);</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack"
                                                                style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-comment">//设置？的值</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">pst</span>.<span class="cm-variable">setObject</span>(<span class="cm-number">1</span>, <span
            class="cm-string">"chailinyan"</span>);</span></pre><pre class=" CodeMirror-line " role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">FileInputStream</span> <span class="cm-variable">fis</span> <span
            class="cm-operator">=</span> <span class="cm-keyword">new</span> <span
            class="cm-variable">FileInputStream</span>(<span
            class="cm-string">"D:/QMDownload/img/美女/15.jpg"</span>);</span></pre><pre class=" CodeMirror-line "
                                                                                      role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable">pst</span>.<span class="cm-variable">setBlob</span>(<span
            class="cm-number">2</span>, <span class="cm-variable">fis</span>);</span></pre><pre
            class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack"
                                                                style="padding-right: 0.1px;"><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "
                                                                                           role="presentation"><span
            role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation"
                                                                    cm-text="	">    </span><span class="cm-tab"
                                                                                                    role="presentation"
                                                                                                    cm-text="	">    </span><span
            class="cm-variable-3">int</span> <span class="cm-variable">len</span> <span
            class="cm-operator">=</span> <span class="cm-variable">pst</span>.<span
            class="cm-variable">executeUpdate</span>();</span></pre><pre class=" CodeMirror-line "
                                                                         role="presentation"><span role="presentation"
                                                                                                   style="padding-right: 0.1px;"><span
            class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation"
                                                                               cm-text="	">    </span><span
            class="cm-variable">System</span>.<span class="cm-variable">out</span>.<span
            class="cm-variable">println</span>(<span class="cm-variable">len</span><span class="cm-operator">&gt;</span><span
            class="cm-number">0</span><span class="cm-operator">?</span><span class="cm-string">"成功"</span>:<span
            class="cm-string">"失败"</span>);</span></pre></div></div></div></div></div><div
            style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 493px;"></div><div
            class="CodeMirror-gutters" style="display: none; height: 493px;"></div></div></div></pre>
    <ul>
        <li><p>注意两个问题：</p>
            <p>①my.ini关于上传的字节流文件有大小限制，可以在my.ini中配置变量</p>
            <p><span>	</span>max_allowed_packet=16M</p>
            <p>②每一种blob有各自大小限制：</p>
            <p>tinyblob:255字节、blob:65k、mediumblob:16M、longblob:4G</p></li>
    </ul>
    <h2><a name='header-n76' class='md-header-anchor '></a>2.2 获取自增长键值</h2>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n77"
         mdtype="fences" style="break-inside: unset;">/*
 * 我们通过JDBC往数据库的表格中添加一条记录，其中有一个字段是自增的，那么在JDBC这边怎么在添加之后直接获取到这个自增的值
 * PreparedStatement是Statement的子接口。
 * Statement接口中有一些常量值：
 * （1）Statement.RETURN_GENERATED_KEYS
 * 
 * 要先添加后获取到自增的key值：
 * （1）PreparedStatement pst = conn.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);
 * （2）添加sql执行完成后,通过PreparedStatement的对象调用getGeneratedKeys()方法来获取自增长键值，遍历结果集
 * 		ResultSet rs = pst.getGeneratedKeys();
 */
public class TestAutoIncrement {
	public static void main(String[] args) throws Exception{
		//1、注册驱动
		Class.forName("com.mysql.jdbc.Driver");
		
		//2、获取连接
		Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "123456");
		
		//3、执行sql
		String sql = "insert into t_department values(null,?,?)";
		/*
		 * 这里在创建PreparedStatement对象时，传入第二个参数的作用，就是告知服务器端
		 * 当执行完sql后，把自增的key值返回来。
		 */
		PreparedStatement pst = conn.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);
		
		//设置？的值
		pst.setObject(1, "测试部");
		pst.setObject(2, "测试项目数据");
		
		//执行sql
		int len = pst.executeUpdate();//返回影响的记录数
		if(len&gt;0){
			//从pst中获取到服务器端返回的键值
			ResultSet rs = pst.getGeneratedKeys();
			//因为这里的key值可能多个，因为insert语句可以同时添加多行，所以用ResultSet封装
			//这里因为只添加一条，所以用if判断
			if(rs.next()){
				Object key = rs.getObject(1);
				System.out.println("自增的key值did =" + key);
			}
		}
			
		//4、关闭
		pst.close();
		conn.close();
	}
}
</pre>
    <h2><a name='header-n78' class='md-header-anchor '></a>2.3 批处理</h2>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n79"
         mdtype="fences" style="break-inside: unset;">/*
 * 批处理：
 * 	批量处理sql
 * 
 * 例如：
 * （1）订单明细表的多条记录的添加
 * （2）批量添加模拟数据
 * ...
 * 
 * 不用批处理，和用批处理有什么不同？
 * 批处理的效率很多
 * 
 * 如何进行批处理操作？
 * （1）在url中要加一个参数
 *     rewriteBatchedStatements=true
 *     那么我们的url就变成了  jdbc:mysql://localhost:3306/test?rewriteBatchedStatements=true
 *     这里的?，表示?后面是客户端给服务器端传的参数，多个参数直接使用&amp;分割
 * （2）调用方法不同
 * pst.addBatch();
 * int[] all = pst.executeBatch();
 * 
 * 注意：如果批量添加时，insert使用values,不要使用value
 */
public class TestBatch {
	
	public static void main(String[] args) throws Exception{
		long start = System.currentTimeMillis();
		//例如：在部门表t_department中添加1000条模拟数据
		//1、注册驱动
		Class.forName("com.mysql.jdbc.Driver");
		
		//2、获取连接
		Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/test?rewriteBatchedStatements=true", "root", "123456");
		
		//3、执行sql
		String sql = "insert into t_department values(null,?,?)";
		PreparedStatement pst = conn.prepareStatement(sql);
		
		//设置？的值
		for (int i = 1; i &lt;=1000; i++) {
			pst.setObject(1, "模拟部门"+i);
			pst.setObject(2, "模拟部门的简介"+i);
			
			pst.addBatch();//添加到批处理一组操作中，攒一块处理
/*			if(i % 500 == 0){//有时候也攒一部分，执行一部分
				//2.执行
				pst.executeBatch();
				//3.清空
				pst.clearBatch();
			}*/
		}
		pst.executeBatch();
		
		//4、关闭
		pst.close();
		conn.close();
		
		long end = System.currentTimeMillis();
		System.out.println("耗时：" + (end - start));//耗时：821
	}
}
</pre>
    <h2><a name='header-n80' class='md-header-anchor '></a>2.4 事务</h2>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n81"
         mdtype="fences" style="break-inside: unset;">/*
 * mysql默认每一个连接是自动提交事务的。
 * 那么当我们在JDBC这段，如果有多条语句想要组成一个事务一起执行的话，那么在JDBC这边怎么设置手动提交事务呢？
 * (1)在执行之前，设置手动提交事务
 * Connection的对象.setAutoCommit(false)
 * (2)成功：
 * Connection的对象.commit();
 * 失败：
 * Connection的对象.rollback();
 * 
 * 补充说明：
 * 为了大家养成要的习惯，在关闭Connection的对象之前，把连接对象设置回自动提交
 * (3)Connection的对象.setAutoCommit(true)
 * 
 * 因为我们现在的连接是建立新的连接，那么如果没有还原为自动提交，没有影响。
 * 但是我们后面实际开发中，每次获取的连接，不一定是新的连接，而是从连接池中获取的旧的连接，而且你关闭也不是真关闭，
 * 而是还给连接池，供别人接着用。以防别人拿到后，以为是自动提交的，而没有commit，最终数据没有成功。
 */
public class TestTransaction {
	public static void main(String[] args) throws Exception{
		/*
		 * 一般涉及到事务处理的话，那么业务逻辑都会比较复杂。
		 * 例如：购物车结算时：
		 * （1）在订单表中添加一条记录
		 * （2）在订单明细表中添加多条订单明细的记录（表示该订单买了什么东西）
		 * （3）修改商品表的销量和库存量
		 * ...
		 * 那么我们今天为了大家关注事务的操作，而不会因为复杂的业务逻辑的影响导致我们的理解，那么我们这里故意
		 * 用两条修改语句来模拟组成一个简单的事务。
		 * update t_department set description = 'xx' where did = 2;
		 * update t_department set description = 'yy' where did = 3;
		 * 
		 * 我希望这两天语句要么一起成功，要么一起回滚
		 * 为了制造失败，我故意把第二条语句写错
		 * update t_department set description = 'yy' （少了where） did = 3;
		 */
		
		//1、注册驱动
		Class.forName("com.mysql.jdbc.Driver");
		
		//2、获取连接
		Connection conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/test", "root", "123456");
		
		//设置手动提交事务
		conn.setAutoCommit(false);
		
		//3、执行sql
		String sql1 = "update t_department set description = 'xx' where did = 2";
		String sql2 = "update t_department set description = 'yy' did = 3";//这是错的
		
		//使用prepareStatement的sql也可以不带?
		PreparedStatement pst = null;
		try {
			pst = conn.prepareStatement(sql1);
			int len = pst.executeUpdate();
			System.out.println("第一条：" + (len&gt;0?"成功":"失败"));
			
			pst = conn.prepareStatement(sql2);
			len = pst.executeUpdate();
			System.out.println("第二条：" + (len&gt;0?"成功":"失败"));
			
			//都成功了，就提交事务
			System.out.println("提交");
			conn.commit();
		} catch (Exception e) {
			System.out.println("回滚");
			//失败要回滚
			conn.rollback();
		}
		
		//4、关闭
		pst.close();
		conn.setAutoCommit(true);//还原为自动提交
		conn.close();
	}
}
</pre>
    <h1><a name='header-n82' class='md-header-anchor '></a>第三章 数据库连接池</h1>
    <p>1、什么是数据库连池
        连接对象的缓冲区。负责申请，分配管理，释放连接的操作。</p>
    <p>2、为什么要使用数据库连接池</p>
    <p>不使用数据库连接池，每次都通过DriverManager获取新连接，用完直接抛弃断开，连接的利用率太低，太浪费。
        对于数据库服务器来说，压力太大了。我们数据库服务器和Java程序对连接数也无法控制，很容易导致数据库服务器崩溃。</p>
    <p>我们就希望能管理连接。
        我们可以建立一个连接池，这个池中可以容纳一定数量的连接对象，一开始，我们可以先替用户先创建好一些连接对象，
        等用户要拿连接对象时，就直接从池中拿，不用新建了，这样也可以节省时间。然后用户用完后，放回去，别人可以接着用。
        可以提高连接的使用率。当池中的现有的连接都用完了，那么连接池可以向服务器申请新的连接放到池中。
        直到池中的连接达到“最大连接数”，就不能在申请新的连接了，如果没有拿到连接的用户只能等待。</p>
    <p>3、市面上有很多现成的数据库连接池技术：</p>
    <ul>
        <li><p>JDBC 的数据库连接池使用 javax.sql.DataSource 来表示，DataSource 只是一个接口（通常被称为数据源），该接口通常由服务器(Weblogic, WebSphere,
            Tomcat)提供实现，也有一些开源组织提供实现：</p>
            <ul>
                <li><strong>DBCP</strong> 是Apache提供的数据库连接池，<strong>速度相对c3p0较快</strong>，但因自身存在BUG，Hibernate3已不再提供支持</li>
                <li><strong>C3P0</strong> 是一个开源组织提供的一个数据库连接池，<strong>速度相对较慢，稳定性还可以</strong></li>
                <li><strong>Proxool</strong> 是sourceforge下的一个开源项目数据库连接池，有监控连接池状态的功能，<strong>稳定性较c3p0差一点</strong></li>
                <li><strong>BoneCP</strong> 是一个开源组织提供的数据库连接池，速度快</li>
                <li><strong>Druid</strong> 是阿里提供的数据库连接池，据说是集DBCP 、C3P0 、Proxool 优点于一身的数据库连接池</li>
            </ul>
        </li>
    </ul>
    <p>4、阿里的德鲁伊连接池技术</p>
    <p>（1）加入jar包</p>
    <p>例如：druid-1.1.10.jar</p>
    <p>（2）代码步骤</p>
    <p>第一步：建立一个数据库连接池</p>
    <p>第二步：设置连接池的参数</p>
    <p>第三步：获取连接</p>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n109"
         mdtype="fences" style="break-inside: unset;">public class TestPool {
	public static void main(String[] args) throws SQLException {
		//1、创建数据源（数据库连接池）对象
		DruidDataSource ds =new DruidDataSource();
		
		//2、设置参数
		//(1)设置基本参数
		ds.setDriverClassName("com.mysql.jdbc.Driver");
		ds.setUrl("jdbc:mysql://localhost:3306/test");
		ds.setUsername("root");
		ds.setPassword("123456");
		
		//(2)设置连接数等参数
		ds.setInitialSize(5);//一开始提前申请好5个连接，不够了，重写申请
		ds.setMaxActive(10);//最多不超过10个，如果10都用完了，还没还回来，就会出现等待
		ds.setMaxWait(1000);//用户最多等1000毫秒，如果1000毫秒还没有人还回来，就异常了
		
		//3、获取连接
		for (int i = 1; i &lt;=15; i++) {
			Connection conn = ds.getConnection();
			System.out.println("第"+i+"个：" + conn);
			
			//如果这里没有关闭，就相当于没有还
//			conn.close();#这里关闭，是还回池中
		}
	}
}
</pre>
    <figure>
        <table>
            <thead>
            <tr>
                <th><strong>配置</strong></th>
                <th><strong>缺省</strong></th>
                <th><strong>说明</strong></th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>name</td>
                <td>&nbsp;</td>
                <td>配置这个属性的意义在于，如果存在多个数据源，监控的时候可以通过名字来区分开来。 如果没有配置，将会生成一个名字，格式是：”DataSource-” +
                    System.identityHashCode(this)
                </td>
            </tr>
            <tr>
                <td>jdbcUrl</td>
                <td>&nbsp;</td>
                <td>连接数据库的url，不同数据库不一样。例如：mysql : jdbc:mysql://10.20.153.104:3306/druid2 oracle :
                    jdbc:oracle:thin:@10.20.149.85:1521:ocnauto
                </td>
            </tr>
            <tr>
                <td>username</td>
                <td>&nbsp;</td>
                <td>连接数据库的用户名</td>
            </tr>
            <tr>
                <td>password</td>
                <td>&nbsp;</td>
                <td>连接数据库的密码。如果你不希望密码直接写在配置文件中，可以使用ConfigFilter。详细看这里：<a
                        href='https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter' target='_blank'
                        class='url'>https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter</a></td>
            </tr>
            <tr>
                <td>driverClassName</td>
                <td>&nbsp;</td>
                <td>根据url自动识别 这一项可配可不配，如果不配置druid会根据url自动识别dbType，然后选择相应的driverClassName(建议配置下)</td>
            </tr>
            <tr>
                <td>initialSize</td>
                <td>0</td>
                <td>初始化时建立物理连接的个数。初始化发生在显示调用init方法，或者第一次getConnection时</td>
            </tr>
            <tr>
                <td>maxActive</td>
                <td>8</td>
                <td>最大连接池数量</td>
            </tr>
            <tr>
                <td>maxIdle</td>
                <td>8</td>
                <td>已经不再使用，配置了也没效果</td>
            </tr>
            <tr>
                <td>minIdle</td>
                <td>&nbsp;</td>
                <td>最小连接池数量</td>
            </tr>
            <tr>
                <td>maxWait</td>
                <td>&nbsp;</td>
                <td>获取连接时最大等待时间，单位毫秒。配置了maxWait之后，缺省启用公平锁，并发效率会有所下降，如果需要可以通过配置useUnfairLock属性为true使用非公平锁。</td>
            </tr>
            <tr>
                <td>poolPreparedStatements</td>
                <td>false</td>
                <td>是否缓存preparedStatement，也就是PSCache。PSCache对支持游标的数据库性能提升巨大，比如说oracle。在mysql下建议关闭。</td>
            </tr>
            <tr>
                <td>maxOpenPreparedStatements</td>
                <td>-1</td>
                <td>
                    要启用PSCache，必须配置大于0，当大于0时，poolPreparedStatements自动触发修改为true。在Druid中，不会存在Oracle下PSCache占用内存过多的问题，可以把这个数值配置大一些，比如说100
                </td>
            </tr>
            <tr>
                <td>validationQuery</td>
                <td>&nbsp;</td>
                <td>用来检测连接是否有效的sql，要求是一个查询语句。如果validationQuery为null，testOnBorrow、testOnReturn、testWhileIdle都不会其作用。</td>
            </tr>
            <tr>
                <td>testOnBorrow</td>
                <td>true</td>
                <td>申请连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能。</td>
            </tr>
            <tr>
                <td>testOnReturn</td>
                <td>false</td>
                <td>归还连接时执行validationQuery检测连接是否有效，做了这个配置会降低性能</td>
            </tr>
            <tr>
                <td>testWhileIdle</td>
                <td>false</td>
                <td>建议配置为true，不影响性能，并且保证安全性。申请连接的时候检测，如果空闲时间大于timeBetweenEvictionRunsMillis，执行validationQuery检测连接是否有效。
                </td>
            </tr>
            <tr>
                <td>timeBetweenEvictionRunsMillis</td>
                <td>&nbsp;</td>
                <td>有两个含义： 1)Destroy线程会检测连接的间隔时间2)testWhileIdle的判断依据，详细看testWhileIdle属性的说明</td>
            </tr>
            <tr>
                <td>numTestsPerEvictionRun</td>
                <td>&nbsp;</td>
                <td>不再使用，一个DruidDataSource只支持一个EvictionRun</td>
            </tr>
            <tr>
                <td>minEvictableIdleTimeMillis</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
            </tr>
            <tr>
                <td>connectionInitSqls</td>
                <td>&nbsp;</td>
                <td>物理连接初始化的时候执行的sql</td>
            </tr>
            <tr>
                <td>exceptionSorter</td>
                <td>&nbsp;</td>
                <td>根据dbType自动识别 当数据库抛出一些不可恢复的异常时，抛弃连接</td>
            </tr>
            <tr>
                <td>filters</td>
                <td>&nbsp;</td>
                <td>属性类型是字符串，通过别名的方式配置扩展插件，常用的插件有： 监控统计用的filter:stat日志用的filter:log4j防御sql注入的filter:wall</td>
            </tr>
            <tr>
                <td>proxyFilters</td>
                <td>&nbsp;</td>
                <td>类型是List，如果同时配置了filters和proxyFilters，是组合关系，并非替换关系</td>
            </tr>
            </tbody>
        </table>
    </figure>
    <h1><a name='header-n207' class='md-header-anchor '></a>第四章 封装JDBCTools</h1>
    <p>配置文件：src/jdbc.properties</p>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="properties" contenteditable="false" cid="n209"
         mdtype="fences">#key=value
driverClassName=com.mysql.jdbc.Driver
url=jdbc:mysql://localhost:3306/test
username=root
password=123456
initialSize=5
maxActive=10
maxWait=1000
</pre>
    <p>JDBCTools工具类：</p>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n211"
         mdtype="fences" style="break-inside: unset;">package com.atguigu.util;

import java.sql.Connection;
import java.sql.SQLException;
import java.util.Properties;

import javax.sql.DataSource;

import com.alibaba.druid.pool.DruidDataSourceFactory;

/*
 * 获取连接或释放连接的工具类
 */
public class JDBCTools {
	// 1、数据源,即连接池
	private static DataSource dataSource;
	
	// 2、ThreadLocal对象
	private static ThreadLocal&lt;Connection&gt; threadLocal;

	static {
		try {
			//1、读取druip.properties文件
			Properties pro = new Properties();
			pro.load(JDBCTools.class.getClassLoader().getResourceAsStream("druid.properties"));
			
			//2、连接连接池
			dataSource = DruidDataSourceFactory.createDataSource(pro);

			//3、创建线程池
			threadLocal = new ThreadLocal&lt;&gt;();
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

	/**
	 * 获取连接的方法
	 * 
	 * @return
	 * @throws SQLException
	 */
	public static Connection getConnection() {
		// 从当前线程中获取连接
		Connection connection = threadLocal.get();
		if (connection == null) {
			// 从连接池中获取一个连接
			try {
				connection = dataSource.getConnection();
				// 将连接与当前线程绑定
				threadLocal.set(connection);
			} catch (SQLException e) {
				e.printStackTrace();
			}
		}
		return connection;
	}

	/**
	 * 释放连接的方法
	 * 
	 * @param connection
	 */
	public static void releaseConnection() {
		// 获取当前线程中的连接
		Connection connection = threadLocal.get();
		if (connection != null) {
			try {
				connection.close();
				// 将已经关闭的连接从当前线程中移除
				threadLocal.remove();
			} catch (SQLException e) {
				e.printStackTrace();
			}
		}
	}
}
</pre>
    <p>其中ThreadLocal的介绍如下：</p>
    <p>JDK
        1.2的版本中就提供java.lang.ThreadLocal，为解决多线程程序的并发问题提供了一种新的思路。使用这个工具类可以很简洁地编写出优美的多线程程序。通常用来在在多线程中管理共享数据库连接、Session等</p>
    <p>ThreadLocal用于保存某个线程共享变量，原因是在Java中，每一个线程对象中都有一个ThreadLocalMap&lt;ThreadLocal, Object&gt;，其key就是一个ThreadLocal，而Object即为该线程的共享变量。而这个map是通过ThreadLocal的set和get方法操作的。对于同一个static
        ThreadLocal，不同线程只能从中get，set，remove自己的变量，而不会影响其他线程的变量。</p>
    <p>1、ThreadLocal.get: 获取ThreadLocal中当前线程共享变量的值。</p>
    <p>2、ThreadLocal.set: 设置ThreadLocal中当前线程共享变量的值。</p>
    <p>3、ThreadLocal.remove: 移除ThreadLocal中当前线程共享变量的值。</p>
    <h1><a name='header-n218' class='md-header-anchor '></a>第五章 封装BasicDAOImpl</h1>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n219"
         mdtype="fences" style="break-inside: unset;">package com.atguigu.test08.dao;

import java.lang.reflect.Field;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.SQLException;
import java.util.ArrayList;

import com.atguigu.test06.threadlocal.JDBCTools2;

/*
 * 提供增、删、改、查所有表的通用方法
 */
public class BasicDAO1 {
	/*
	 * 通用的增、删、改的方法
	 */
	protected int update(String sql,Object... args) throws SQLException{
		//1、获取连接对象
		Connection conn = JDBCTools2.getConnection();
		//2、编写sql，用形参传入的方式代替
		
		//3、获取Statement或PreparedStatement对象
		PreparedStatement pst = conn.prepareStatement(sql);
		
		//设置？的值
		//因为不知道sql中是否有?，以及？设置为什么值，通过形参来传入
		//Object... args可变形参，可以传入0~n个值
		//如果没有传入，说明没有？需要设置
		//如果传入了n个值，那么说明sql中有n个？需要设置
		if(args!=null  &amp;&amp; args.length&gt;0){
			for (int i = 0; i &lt; args.length; i++) {
				//数组的下标从0开始，pst的？的序号是从1开始，所以这里用i+1
				pst.setObject(i+1, args[i]);
			}
		}
		
		//4、执行sql
		int len = pst.executeUpdate();
		//5、关闭		
		pst.close();
		JDBCTools2.free();
		
		return len;
	}
	
	/*
	 * 通用查询多个Javabean对象的方法
	 */
	protected &lt;T&gt; ArrayList&lt;T&gt; getList(Class&lt;T&gt; clazz,String sql,Object... args) throws Exception{
		//1、获取连接
		Connection conn = JDBCTools2.getConnection();
		
		//2、编写sql，由形参传入
		
		//3、获取PreparedStatement对象
		PreparedStatement pst = conn.prepareStatement(sql);
		
		//4、设置？，由形参传入
		if(args!=null  &amp;&amp; args.length&gt;0){
			for (int i = 0; i &lt; args.length; i++) {
				//数组的下标从0开始，pst的？的序号是从1开始，所以这里用i+1
				pst.setObject(i+1, args[i]);
			}
		}
		
		//5、执行sql
		ResultSet rs = pst.executeQuery();
		/*
		 * 如何把ResultSet结果集中的数据变成一个一个的Javabean对象，放到ArrayList对象，并且返回
		 */
		ArrayList&lt;T&gt; list = new ArrayList&lt;&gt;();
		/*
		 * 要从ResultSet结果集中获取一共有几行，决定要创建几个对象
		 * 要从ResultSet结果集中获取一共有几列，决定要为几个属性赋值
		 * ResultSet结果集对象中，有一个方法ResultSetMetaData getMetaData()获取结果集的元数据
		 * 元数据就是描述结果集中的数据的数据，例如：列数，列名称等
		 */
		ResultSetMetaData metaData = rs.getMetaData();
		int count = metaData.getColumnCount();//获取列数
		
		while(rs.next()){//循环一次代表一行，就要创建一个Javabean对象
			//(1)创建一个Javabean对象
			T t  = clazz.newInstance();//这个方法有要求，要求Javabean这个类要有无参构造
			
			//(2)设置对象的属性值
			/*
			 * 反射操作属性的步骤：
			 * ①获取Class对象，现在有了
			 * ②获取属性对象Field
			 * 		Field f = clazz.getDeclaredField("属性名");
			 * ③创建Javabean对象，已经创建
			 * ④设置属性的可访问性  setAccessible(true)
			 * ⑤设置属性的值
			 */
			for (int i = 0; i &lt; count; i++) {//一共要为count个属性赋值
//				Field f = clazz.getDeclaredField("属性名");
				String fieldName = metaData.getColumnLabel(i+1);//获取第几列的字段名
				Field f = clazz.getDeclaredField(fieldName);
				
				f.setAccessible(true);
				
				f.set(t, rs.getObject(i+1));//rs.getObject(i+1)获取第几列的值
			}
			
			//(3)把Javabean对象放到list中
			list.add(t);
		}
		
		//6、关闭
		rs.close();
		pst.close();
		JDBCTools2.free();
		
		return list;
	}

	protected &lt;T&gt; T getBean(Class&lt;T&gt; clazz,String sql,Object... args) throws Exception{
		return getList(clazz,sql,args).get(0);
	}
}
</pre>
    <p>使用BasicDAOImpl实现Employee的增删改查</p>
    <p><img src='imgs/1557457111280.png' alt='1557457111280' referrerPolicy='no-referrer'/></p>
    <p>示例代码：EmployeeDAO.java</p>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n223"
         mdtype="fences">public interface EmployeeDAO {
	void addEmployee(Employee emp);
	void updateEmployee(Employee emp);
	void deleteByEid(int eid);
	Employee getByEid(int eid);
	ArrayList&lt;Employee&gt; getAll();
}
</pre>
    <p>示例代码：EmployeeDAOImpl.java</p>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n225"
         mdtype="fences" style="break-inside: unset;">package com.atguigu.test08.dao;

import java.sql.SQLException;
import java.util.ArrayList;

import com.atguigu.bean.Employee;

public class EmployeeDAOImpl extends BasicDAO1 implements EmployeeDAO {

	@Override
	public void addEmployee(Employee emp) {
		//`ename`,`tel`,`gender`,`salary`,`commission_pct`,`birthday`,
		//`hiredate`,`job_id`,`email`,`mid`,`address`,`native_place`,`did`
		String sql = "insert into t_employee values(null,?,?,?,?,?,?,?,?,?,?,?,?,?)";
		
		try {
			update(sql, emp.getEname(),emp.getTel(),emp.getGender(),emp.getSalary(),emp.getCommissionPct(),
					emp.getBirthday(),emp.getHiredate(),emp.getJobId(),emp.getEmail(),emp.getMid(),emp.getAddress(),
					emp.getNativePlace(),emp.getDid());
		} catch (SQLException e) {
			throw new RuntimeException(e);
		}
	}

	@Override
	public void updateEmployee(Employee emp) {
		String sql = "update t_employee set `ename`=?,`tel`=?,`gender`=?,`salary`=?,`commission_pct`=?,`birthday`=?,`hiredate`=?,`job_id`=?,`email`=?,`mid`=?,`address`=?,`native_place`=?,`did`=? where eid=?";
		try {
			update(sql, emp.getEname(),emp.getTel(),emp.getGender(),emp.getSalary(),emp.getCommissionPct(),
					emp.getBirthday(),emp.getHiredate(),emp.getJobId(),emp.getEmail(),emp.getMid(),emp.getAddress(),
					emp.getNativePlace(),emp.getDid(),emp.getEid());
		} catch (SQLException e) {
			throw new RuntimeException(e);
		}
	}

	@Override
	public void deleteByEid(int eid) {
		String sql = "delete from t_employee where eid=?";
		try {
			update(sql, eid);
		} catch (SQLException e) {
			throw new RuntimeException(e);
		}
	}

	@Override
	public Employee getByEid(int eid) {
		//这里sql中通过取别名的方式，来指定对应的Javabean的属性名
		String sql = "select `eid`,`ename`,`tel`,`gender`,`salary`,`commission_pct` commissionPct ,`birthday`,`hiredate`,`job_id` jobId,`email`,`mid`,`address`,`native_place` nativePlace,`did` from t_employee where eid=?";
		Employee emp = null;
		try {
			emp = getBean(Employee.class, sql, eid);
		} catch (Exception e) {
			throw new RuntimeException(e);
		}	
		return emp;
	}

	@Override
	public ArrayList&lt;Employee&gt; getAll() {
		//这里sql中通过取别名的方式，来指定对应的Javabean的属性名
		String sql = "select `eid`,`ename`,`tel`,`gender`,`salary`,`commission_pct` commissionPct ,`birthday`,`hiredate`,`job_id` jobId,`email`,`mid`,`address`,`native_place` nativePlace,`did` from t_employee";
		ArrayList&lt;Employee&gt;  list = new ArrayList&lt;Employee&gt;();
		try {
			list = getList(Employee.class, sql);
		} catch (Exception e) {
			throw new RuntimeException(e);
		}
		return list;
	}
}
</pre>
    <h1><a name='header-n226' class='md-header-anchor '></a>第六章 Apache的DBUtils</h1>
    <p>commons-dbutils 是 Apache 组织提供的一个开源 JDBC工具类库，它是对JDBC的简单封装，学习成本极低，并且使用dbutils能极大简化jdbc编码的工作量，同时也不会影响程序的性能。</p>
    <p>其中QueryRunner类封装了SQL的执行，是线程安全的。</p>
    <p>（1）可以实现增、删、改、查、批处理、</p>
    <p>（2）考虑了事务处理需要共用Connection。</p>
    <p>（3）该类最主要的就是简单化了SQL查询，它与ResultSetHandler组合在一起使用可以完成大部分的数据库操作，能够大大减少编码量。</p>
    <p><strong>（1）更新</strong></p>
    <p>public int update(Connection conn, String sql, Object... params) throws SQLException:用来执行一个更新（插入、更新或删除）操作。</p>
    <p>......</p>
    <p><strong>（2）插入</strong></p>
    <p>public
        <T> T insert(Connection conn,String sql,ResultSetHandler
            <T> rsh, Object... params) throws SQLException：只支持INSERT语句，其中 rsh - The handler used to create the result
                object from the ResultSet of auto-generated keys. 返回值: An object generated by the handler.即自动生成的键值
    </p>
    <p>....</p>
    <p><strong>（3）批处理</strong></p>
    <p>public int[] batch(Connection conn,String sql,Object[][] params)throws SQLException： INSERT, UPDATE, or
        DELETE语句</p>
    <p>public
        <T> T insertBatch(Connection conn,String sql,ResultSetHandler
            <T> rsh,Object[][] params)throws SQLException：只支持INSERT语句
    </p>
    <p>.....</p>
    <p><strong>（4）使用QueryRunner类实现查询</strong></p>
    <p>public Object query(Connection conn, String sql, ResultSetHandler rsh,Object... params) throws
        SQLException：执行一个查询操作，在这个查询中，对象数组中的每个元素值被用来作为查询语句的置换参数。该方法会自行处理 PreparedStatement 和 ResultSet 的创建和关闭。</p>
    <p>....</p>
    <p>ResultSetHandler接口用于处理 java.sql.ResultSet，将数据按要求转换为另一种形式。ResultSetHandler 接口提供了一个单独的方法：Object handle
        (java.sql.ResultSet rs)该方法的返回值将作为QueryRunner类的query()方法的返回值。</p>
    <p>该接口有如下实现类可以使用：</p>
    <ul>
        <li>BeanHandler：将结果集中的第一行数据封装到一个对应的JavaBean实例中。</li>
        <li>BeanListHandler：将结果集中的每一行数据都封装到一个对应的JavaBean实例中，存放到List里。</li>
        <li>ScalarHandler：查询单个值对象</li>
        <li>MapHandler：将结果集中的第一行数据封装到一个Map里，key是列名，value就是对应的值。</li>
        <li>MapListHandler：将结果集中的每一行数据都封装到一个Map里，然后再存放到List</li>
        <li>ColumnListHandler：将结果集中某一列的数据存放到List中。</li>
        <li>KeyedHandler(name)：将结果集中的每一行数据都封装到一个Map里，再把这些map再存到一个map里，其key为指定的key。</li>
        <li>ArrayHandler：把结果集中的第一行数据转成对象数组。</li>
        <li>ArrayListHandler：把结果集中的每一行数据都转成一个数组，再存放到List中。</li>
    </ul>
    <p>示例代码：BasicDAOImpl.java</p>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n267"
         mdtype="fences" style="break-inside: unset;">package com.atguigu.test09.dbutil;

import java.sql.Connection;
import java.sql.SQLException;
import java.util.List;
import java.util.Map;

import org.apache.commons.dbutils.QueryRunner;
import org.apache.commons.dbutils.handlers.BeanHandler;
import org.apache.commons.dbutils.handlers.BeanListHandler;
import org.apache.commons.dbutils.handlers.MapListHandler;
import org.apache.commons.dbutils.handlers.ScalarHandler;

import com.atguigu.test06.threadlocal.JDBCTools2;

public class BasicDAO2 {
	private QueryRunner qr = new QueryRunner();
	
	protected int update(String sql,Object... args) throws SQLException{
		Connection conn = JDBCTools2.getConnection();
		
		int len = qr.update(conn, sql, args);
		
		//QueryRunner可以帮你关闭连接
		return len;
	}
	
	protected &lt;T&gt; List&lt;T&gt; getList(Class&lt;T&gt; clazz,String sql,Object... args) throws Exception{
		Connection conn = JDBCTools2.getConnection();
		
		/*
		 * ResultSetHandler接口,用于处理 java.sql.ResultSet，将数据按要求转换为另一种形式。
		 * (1)BeanListHandler等形式
		 */
		List&lt;T&gt; list = qr.query(conn, sql, new BeanListHandler&lt;&gt;(clazz), args);
		
		return list;
	}
	
	protected &lt;T&gt; T getBean(Class&lt;T&gt; clazz,String sql,Object... args) throws Exception{
		Connection conn = JDBCTools2.getConnection();
		/*
		 * ResultSetHandler接口,用于处理 java.sql.ResultSet，将数据按要求转换为另一种形式。
		 * (2)BeanHandler等形式
		 */
		T t = qr.query(conn, sql, new BeanHandler&lt;&gt;(clazz), args);
		
		return t;
	}
	
	/*
	 * 通用的查询单个值的方法
	 * 例如：员工总数，最高工资，平均工资等
	 */
	protected Object getObject(String sql,Object... args) throws Exception{
		Connection conn = JDBCTools2.getConnection();
		
		/*
		 * ResultSetHandler接口,用于处理 java.sql.ResultSet，将数据按要求转换为另一种形式。
		 * (3)ScalarHandler：查询单个值对象等形式
		 */
		Object obj = qr.query(conn, sql, new ScalarHandler&lt;&gt;(), args);
		
		return obj;
	}
	
	/*
	 * 通用的查询多行多列的方法
	 * 例如：每个部门的平均工资
	 */
	protected List&lt;Map&lt;String, Object&gt;&gt; getMapList(String sql,Object... args) throws Exception{
		Connection conn = JDBCTools2.getConnection();
		/*
		 * ResultSetHandler接口,用于处理 java.sql.ResultSet，将数据按要求转换为另一种形式。
		 * (4)MapListHandler：将结果集中的每一行数据都封装到一个Map里，然后再存放到List
		 */
		List&lt;Map&lt;String, Object&gt;&gt; list = qr.query(conn, sql, new MapListHandler(), args);
		
		return list;
	}
	
}
</pre>
    <p>示例代码：</p>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n269"
         mdtype="fences">public interface EmployeeDAO2 {
	void addEmployee(Employee emp);
	void updateEmployee(Employee emp);
	void deleteByEid(int eid);
	Employee getByEid(int eid);
	List&lt;Employee&gt; getAll();
	long empCount();//查询员工总数
	double avgSalary();//查询全公司的平均工资
	
	//key是部门编号，Double是平均工资
	Map&lt;Integer,Double&gt; avgSalaryPerDepartment();
}
</pre>
    <p>示例代码：</p>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n271"
         mdtype="fences" style="break-inside: unset;">package com.atguigu.test09.dbutil;

import java.sql.SQLException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.atguigu.bean.Employee;

public class EmployeeDAOImpl2 extends BasicDAO2 implements EmployeeDAO2 {

	@Override
	public void addEmployee(Employee emp) {
		//`ename`,`tel`,`gender`,`salary`,`commission_pct`,`birthday`,
		//`hiredate`,`job_id`,`email`,`mid`,`address`,`native_place`,`did`
		String sql = "insert into t_employee values(null,?,?,?,?,?,?,?,?,?,?,?,?,?)";
		
		try {
			update(sql, emp.getEname(),emp.getTel(),emp.getGender(),emp.getSalary(),emp.getCommissionPct(),
					emp.getBirthday(),emp.getHiredate(),emp.getJobId(),emp.getEmail(),emp.getMid(),emp.getAddress(),
					emp.getNativePlace(),emp.getDid());
		} catch (SQLException e) {
			throw new RuntimeException(e);
		}
	}

	@Override
	public void updateEmployee(Employee emp) {
		String sql = "update t_employee set `ename`=?,`tel`=?,`gender`=?,`salary`=?,`commission_pct`=?,`birthday`=?,`hiredate`=?,`job_id`=?,`email`=?,`mid`=?,`address`=?,`native_place`=?,`did`=? where eid=?";
		try {
			update(sql, emp.getEname(),emp.getTel(),emp.getGender(),emp.getSalary(),emp.getCommissionPct(),
					emp.getBirthday(),emp.getHiredate(),emp.getJobId(),emp.getEmail(),emp.getMid(),emp.getAddress(),
					emp.getNativePlace(),emp.getDid(),emp.getEid());
		} catch (SQLException e) {
			throw new RuntimeException(e);
		}
	}

	@Override
	public void deleteByEid(int eid) {
		String sql = "delete from t_employee where eid=?";
		try {
			update(sql, eid);
		} catch (SQLException e) {
			throw new RuntimeException(e);
		}
	}

	@Override
	public Employee getByEid(int eid) {
		//这里sql中通过取别名的方式，来指定对应的Javabean的属性名
		String sql = "select `eid`,`ename`,`tel`,`gender`,`salary`,`commission_pct` commissionPct ,`birthday`,`hiredate`,`job_id` jobId,`email`,`mid`,`address`,`native_place` nativePlace,`did` from t_employee where eid=?";
		Employee emp = null;
		try {
			emp = getBean(Employee.class, sql, eid);
		} catch (Exception e) {
			throw new RuntimeException(e);
		}	
		return emp;
	}

	@Override
	public List&lt;Employee&gt; getAll() {
		//这里sql中通过取别名的方式，来指定对应的Javabean的属性名
		String sql = "select `eid`,`ename`,`tel`,`gender`,`salary`,`commission_pct` commissionPct ,`birthday`,`hiredate`,`job_id` jobId,`email`,`mid`,`address`,`native_place` nativePlace,`did` from t_employee";
		List&lt;Employee&gt;  list = new ArrayList&lt;Employee&gt;();
		try {
			list = getList(Employee.class, sql);
		} catch (Exception e) {
			throw new RuntimeException(e);
		}
		return list;
	}

	@Override
	public long empCount() {
		String sql = "select count(1) from t_employee";
		Long count = 0L;
		try {
			Object obj = getObject(sql);
			count = (Long) obj;
		} catch (Exception e) {
			throw new RuntimeException(e);
		}
		return count;
	}

	@Override
	public double avgSalary() {
		String sql = "select avg(salary) from t_employee";
		Double avg = 0.0;
		try {
			avg = (Double) getObject(sql);
		} catch (Exception e) {
			throw new RuntimeException(e);
		}
		return avg;
	}

	@Override
	public Map&lt;Integer, Double&gt; avgSalaryPerDepartment() {
		String sql = "select did,avg(salary) from t_employee group by did";
		
		Map&lt;Integer, Double&gt; map = new HashMap&lt;&gt;();
		try {
			List&lt;Map&lt;String, Object&gt;&gt; mapList = getMapList(sql);
			/*
			 * String：字段的名称，例如：did,avg(salary)
			 * Object：字段的值，例如1，19819.408666666666
			 *  {did=1, avg(salary)=19819.408666666666}
				{did=2, avg(salary)=11708.5}
				{did=3, avg(salary)=70223.0}
				{did=4, avg(salary)=12332.0}
				{did=5, avg(salary)=11065.5}
			 */
			
			for (Map&lt;String, Object&gt; map2 : mapList) {
				map.put((Integer)map2.get("did"),(Double)map2.get("avg(salary)"));
			}
		} catch (Exception e) {
			throw new RuntimeException(e);
		}
		
		return map;
	}

}
</pre>
    <p>示例代码：</p>
    <pre spellcheck="false" class="md-fences mock-cm md-end-block" lang="java" contenteditable="false" cid="n273"
         mdtype="fences" style="break-inside: unset;">package com.atguigu.test09.dbutil;

import java.util.List;
import java.util.Map;

import org.junit.Test;

import com.atguigu.bean.Employee;

public class TestEmployeeDAOImp2 {
	@Test
	public void test1(){
		EmployeeDAOImpl2 ed2 = new EmployeeDAOImpl2();
		List&lt;Employee&gt; all = ed2.getAll();
		for (Employee employee : all) {
			System.out.println(employee);
		}
	}
	
	@Test
	public void test2(){
		EmployeeDAOImpl2 ed2 = new EmployeeDAOImpl2();
		long count = ed2.empCount();
		System.out.println(count);
	}
	
	@Test
	public void test3(){
		EmployeeDAOImpl2 ed2 = new EmployeeDAOImpl2();
		double avgSalary = ed2.avgSalary();
		System.out.println(avgSalary);
	}
	
	@Test
	public void test4(){
		EmployeeDAOImpl2 ed2 = new EmployeeDAOImpl2();
		Map&lt;Integer, Double&gt; map = ed2.avgSalaryPerDepartment();
		map.forEach((k,v) -&gt; System.out.println(k+"-&gt;"+v));
	}
}
</pre>
    <p>&nbsp;</p>
    <h1><a name='header-n275' class='md-header-anchor '></a>注意：</h1>
    <p>在idea中，junit的测试方法，默认不支持控制台输入，需要找到相应的配置文件进行修改：</p>
    <p>idea的安装目录/bin/idea64.exe.vmoptions</p>
    <p>代开此文件，在最后一行添加一个配置：-Deditable.java.test.console=true</p></div>
<a href='../软件安装教程.html'>回目录</a> <br/>

</body>
</html>